(()=>{var Gt=Object.create;var D=Object.defineProperty,Wt=Object.defineProperties,Rt=Object.getOwnPropertyDescriptor,pt=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertyNames,q=Object.getOwnPropertySymbols,Zt=Object.getPrototypeOf,tt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var $=(l,t,i)=>t in l?D(l,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[t]=i,O=(l,t)=>{for(var i in t||(t={}))tt.call(t,i)&&$(l,i,t[i]);if(q)for(var i of q(t))gt.call(t,i)&&$(l,i,t[i]);return l},et=(l,t)=>Wt(l,pt(t));var v=(l,t)=>()=>(t||l((t={exports:{}}).exports,t),t.exports);var Ut=(l,t,i,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ut(t))!tt.call(l,n)&&n!==i&&D(l,n,{get:()=>t[n],enumerable:!(e=Rt(t,n))||e.enumerable});return l};var j=(l,t,i)=>(i=l!=null?Gt(Zt(l)):{},Ut(t||!l||!l.__esModule?D(i,"default",{value:l,enumerable:!0}):i,l));var it=(l,t,i)=>new Promise((e,n)=>{var o=c=>{try{s(i.next(c))}catch(h){n(h)}},a=c=>{try{s(i.throw(c))}catch(h){n(h)}},s=c=>c.done?e(c.value):Promise.resolve(c.value).then(o,a);s((i=i.apply(l,t)).next())});var at=v((A,L)=>{(function(l){"use strict";var t=function(){},i=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.msRequestAnimationFrame||function(h){return setTimeout(h,16)};function e(){var h=this;h.reads=[],h.writes=[],h.raf=i.bind(l),t("initialized",h)}e.prototype={constructor:e,runTasks:function(h){t("run tasks");for(var d;d=h.shift();)d()},measure:function(h,d){t("measure");var r=d?h.bind(d):h;return this.reads.push(r),n(this),r},mutate:function(h,d){t("mutate");var r=d?h.bind(d):h;return this.writes.push(r),n(this),r},clear:function(h){return t("clear",h),a(this.reads,h)||a(this.writes,h)},extend:function(h){if(t("extend",h),typeof h!="object")throw new Error("expected object");var d=Object.create(this);return s(d,h),d.fastdom=this,d.initialize&&d.initialize(),d},catch:null};function n(h){h.scheduled||(h.scheduled=!0,h.raf(o.bind(null,h)),t("flush scheduled"))}function o(h){t("flush");var d=h.writes,r=h.reads,b;try{t("flushing reads",r.length),h.runTasks(r),t("flushing writes",d.length),h.runTasks(d)}catch(m){b=m}if(h.scheduled=!1,(r.length||d.length)&&n(h),b)if(t("task errored",b.message),h.catch)h.catch(b);else throw b}function a(h,d){var r=h.indexOf(d);return!!~r&&!!h.splice(r,1)}function s(h,d){for(var r in d)d.hasOwnProperty(r)&&(h[r]=d[r])}var c=l.fastdom=l.fastdom||new e;typeof L=="object"&&(L.exports=c)})(typeof window!="undefined"?window:typeof A!="undefined"?A:globalThis)});var nt=v((Mt,E)=>{(function(){"use strict";var l=function(){function t(){}t.prototype=Object.create(null);function i(d,r){for(var b=r.length,m=0;m<b;++m)c(d,r[m])}var e={}.hasOwnProperty;function n(d,r){d[r]=!0}function o(d,r){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){d[r.toString()]=!0;return}for(var b in r)e.call(r,b)&&(d[b]=!!r[b])}var a=/\s+/;function s(d,r){for(var b=r.split(a),m=b.length,G=0;G<m;++G)d[b[G]]=!0}function c(d,r){if(r){var b=typeof r;b==="string"?s(d,r):Array.isArray(r)?i(d,r):b==="object"?o(d,r):b==="number"&&n(d,r)}}function h(){for(var d=arguments.length,r=Array(d),b=0;b<d;b++)r[b]=arguments[b];var m=new t;i(m,r);var G=[];for(var x in m)m[x]&&G.push(x);return G.join(" ")}return h}();typeof E!="undefined"&&E.exports?(l.default=l,E.exports=l):window.classNames=l})()});var ot=v((lt,z)=>{(function(l){var t={browser:[[/msie ([\.\_\d]+)/,"ie"],[/trident\/.*?rv:([\.\_\d]+)/,"ie"],[/firefox\/([\.\_\d]+)/,"firefox"],[/chrome\/([\.\_\d]+)/,"chrome"],[/version\/([\.\_\d]+).*?safari/,"safari"],[/mobile safari ([\.\_\d]+)/,"safari"],[/android.*?version\/([\.\_\d]+).*?safari/,"com.android.browser"],[/crios\/([\.\_\d]+).*?safari/,"chrome"],[/opera/,"opera"],[/opera\/([\.\_\d]+)/,"opera"],[/opera ([\.\_\d]+)/,"opera"],[/opera mini.*?version\/([\.\_\d]+)/,"opera.mini"],[/opios\/([a-z\.\_\d]+)/,"opera"],[/blackberry/,"blackberry"],[/blackberry.*?version\/([\.\_\d]+)/,"blackberry"],[/bb\d+.*?version\/([\.\_\d]+)/,"blackberry"],[/rim.*?version\/([\.\_\d]+)/,"blackberry"],[/iceweasel\/([\.\_\d]+)/,"iceweasel"],[/edge\/([\.\d]+)/,"edge"]],os:[[/linux ()([a-z\.\_\d]+)/,"linux"],[/mac os x/,"macos"],[/mac os x.*?([\.\_\d]+)/,"macos"],[/os ([\.\_\d]+) like mac os/,"ios"],[/openbsd ()([a-z\.\_\d]+)/,"openbsd"],[/android/,"android"],[/android ([a-z\.\_\d]+);/,"android"],[/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/,"firefoxos"],[/windows\s*(?:nt)?\s*([\.\_\d]+)/,"windows"],[/windows phone.*?([\.\_\d]+)/,"windows.phone"],[/windows mobile/,"windows.mobile"],[/blackberry/,"blackberryos"],[/bb\d+/,"blackberryos"],[/rim.*?os\s*([\.\_\d]+)/,"blackberryos"]],device:[[/ipad/,"ipad"],[/iphone/,"iphone"],[/lumia/,"lumia"],[/htc/,"htc"],[/nexus/,"nexus"],[/galaxy nexus/,"galaxy.nexus"],[/nokia/,"nokia"],[/ gt\-/,"galaxy"],[/ sm\-/,"galaxy"],[/xbox/,"xbox"],[/(?:bb\d+)|(?:blackberry)|(?: rim )/,"blackberry"]]},i="Unknown",e=Object.keys(t);function n(){var s=this;e.forEach(function(c){s[c]={name:i,version:[],versionString:i}})}function o(s,c,h){t[c].forEach(function(d){var r=d[0],b=d[1],m=h.match(r);m&&(s[c].name=b,m[2]?(s[c].versionString=m[2],s[c].version=[]):m[1]?(s[c].versionString=m[1].replace(/_/g,"."),s[c].version=a(m[1])):(s[c].versionString=i,s[c].version=[]))})}function a(s){return s.split(/[\._]/).map(function(c){return parseInt(c)})}n.prototype.sniff=function(s){var c=this,h=typeof window!="undefined",d=h?navigator.userAgent:"",r=(s||d).toLowerCase();return e.forEach(function(b){o(c,b,r)}),this},typeof z!="undefined"&&z.exports?z.exports=n:(l.Sniffr=new n,l.Sniffr.sniff(navigator.userAgent))})(lt)});var ht=v((ie,dt)=>{dt.exports=Nt;function Nt(l,t,i){return t<i?l<t?t:l>i?i:l:l<i?i:l>t?t:l}});window.hasOwnProperty("Shorthand")||(window.Shorthand={});var Ft=j(at());var xt=j(nt());var vt=ot();function J(l,t=null){let e=Yt(t).querySelectorAll(l);return Array.from(e)}function Yt(l){return l||(window.__shadowRoot?window.__shadowRoot.querySelector("article"):document)}var C={getOrientation(){return window.Shorthand.displayContainer?C.getWidth()>C.getHeight()?"landscape":"portrait":window.innerWidth>window.innerHeight?"landscape":"portrait"},getHeight(){return window.Shorthand.displayContainer.getCache().height},getWidth(){return window.Shorthand.displayContainer.getCache().width},getTop(){return window.Shorthand.displayContainer.getCache().top},getBottom(){return window.Shorthand.displayContainer.getCache().bottom},getVhUnitsInPixels(l){return C.getHeight()*(l/100)},getDisplayContainer(){return window.Shorthand.displayContainer}},N=C;var K=j(ht());function V(l){return typeof l=="number"?Math.round(l):{x:V(l.x),y:V(l.y),z:l.z}}function P(){return{noHighlightsBehaviour:"contain",lineWidth:10,lineColor:"#12bf9c",markerSize:30,markerColor:"#12bf9c",transitionDuration:1}}var T=null;function f(l=!1){return new Promise((t,i)=>{if(T===null||l){T=P();let e=document.createElement("div");e.className="Theme-Scrollpoints-Highlight",e.style.display="none",e.style.pointerEvents="none",document.body.appendChild(e);let n=document.createElement("div");n.className="Theme-Scrollpoints-Marker",n.style.display="none",n.style.pointerEvents="none",document.body.appendChild(n),setTimeout(()=>{let o=window.getComputedStyle(n);return T.markerSize=parseInt(o.getPropertyValue("width"),10),T.markerColor=o.getPropertyValue("background-color"),o=window.getComputedStyle(e),T.lineWidth=parseInt(o.getPropertyValue("border-width"),10),T.lineColor=o.getPropertyValue("border-color"),T.noHighlightsBehaviour=o.getPropertyValue("background-size")==="cover"?"cover":"contain",t(T)},50)}else return t(T)})}function st(l,t){if(t<=0)return;let{height:i,width:e}=l.canvas,n=l.getImageData(0,0,e,i),{data:o}=n,a=e-1,s=i-1,c=t+1,d=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1][t],b=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18][t],m=[],G=[],x=[],X=[],W=[],Q=[],Vt=3,u,Y,F,k;for(;Vt-- >0;){let I=0,p=0;for(let U=0;U<i;U++){let Z=o[I]*c,y=o[I+1]*c,H=o[I+2]*c,B=o[I+3]*c;for(let R=1;R<=t;R++)u=I+((R>a?a:R)<<2),Z+=o[u++],y+=o[u++],H+=o[u++],B+=o[u];for(let R=0;R<e;R++)m[p]=Z,G[p]=y,x[p]=H,X[p]=B,U===0&&(W[R]=((u=R+c)<a?u:a)<<2,Q[R]=(u=R-t)>0?u<<2:0),Y=I+W[R],F=I+Q[R],Z+=o[Y++]-o[F++],y+=o[Y++]-o[F++],H+=o[Y++]-o[F++],B+=o[Y]-o[F],p++;I+=e<<2}for(let U=0;U<e;U++){let Z=U,y=m[Z]*c,H=G[Z]*c,B=x[Z]*c,R=X[Z]*c;for(let g=1;g<=t;g++)Z+=g>s?0:e,y+=m[Z],H+=G[Z],B+=x[Z],R+=X[Z];p=U<<2;for(let g=0;g<i;g++)o[p+3]=k=R*d>>>b,k>0?(k=255/k,o[p]=(y*d>>>b)*k,o[p+1]=(H*d>>>b)*k,o[p+2]=(B*d>>>b)*k):o[p]=o[p+1]=o[p+2]=0,U===0&&(W[g]=((u=g+c)<s?u:s)*e,Q[g]=(u=g-t)>0?u*e:0),Y=U+W[g],F=U+Q[g],y+=m[Y]-m[F],H+=G[Y]-G[F],B+=x[Y]-x[F],R+=X[Y]-X[F],p+=e<<2}}l.putImageData(n,0,0)}var M=class{constructor(t){this.onTick=t}start(t,i,e){this.from=V(t),this.to=V(i),this.duration=e,!(isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||isNaN(i.x)||isNaN(i.y)||isNaN(i.z))&&(this.secondsRemaining=this.duration,this.lastTickAt=new Date().getTime(),this.tick=this.tick.bind(this),this.tick())}tick(){if(this.duration===0)this.onTick({x:this.to.x,y:this.to.y,z:this.to.z});else{let t=new Date().getTime(),i=(t-this.lastTickAt)/1e3;if(this.lastTickAt=t,this.secondsRemaining>0){this.secondsRemaining=this.secondsRemaining-i;let e=1-Math.max(0,this.secondsRemaining)/this.duration,n=ct(e);this.onTick({x:V(this.from.x+(this.to.x-this.from.x)*n),y:V(this.from.y+(this.to.y-this.from.y)*n),z:this.from.z+(this.to.z-this.from.z)*ct(e)}),requestAnimationFrame(this.tick)}}}},ct=l=>1-(1-l)*(1-l);var rt=.01,bt=2.5,w=class{constructor(t,i,e,n){this.isHidden=!1;this.pixelDensity=1;this.canvasWidth=0;this.canvasHeight=0;this.x=0;this.y=0;this.zoom=1;this.noHighlightsBehaviour="contain";this.maxX=0;this.maxY=0;this.setHighlightsAt=0;this._style=P();this._isReady=!1;this._isRendering=!1;typeof window.devicePixelRatio=="number"&&(this.pixelDensity=Math.min(2,window.devicePixelRatio)),this.initStyle().catch(console.error),this.canvas=t,this.offscreenCanvas=document.createElement("canvas"),this.ctx=this.offscreenCanvas.getContext("2d",{alpha:!1}),this.ctx.imageSmoothingEnabled=!0,this.ctx.lineJoin="miter",this.ctx.lineCap="square",this.finalCtx=this.canvas.getContext("2d",{alpha:!1}),this.image=i,this.highlights=[],this.backgroundColor=e,this.backgroundOpacity=n,this.bias="none",this.x=0,this.y=0,this.zoom=1,this.maxX=0,this.maxY=0,this.tween=new M(this.onTweenTick.bind(this)),this._render=this._render.bind(this),this.render=this.render.bind(this),this.adjustSize(),this._isReady=!0,this.render()}initStyle(){return it(this,null,function*(){this._style=yield f(!0)})}hide(){this.isHidden=!0,this.canvas.style.display="none"}show(){this.isHidden&&this.render(),this.isHidden=!1,this.canvas.style.display="initial"}setInstantSrc(t){if(t===this.backgroundImageSrc)return;this.backgroundImageSrc=t,this.isBackgroundImageReady=!1,this.backgroundImage||(this.backgroundImage=document.createElement("canvas"));let i=document.createElement("img");i.crossOrigin="use-credentials",i.addEventListener("load",()=>{if(i.width<=0)return;this.backgroundImage.width=300,this.backgroundImage.height=300;let e=this.backgroundImage.getContext("2d",{alpha:!1});e.drawImage(i,0,0,this.backgroundImage.width,this.backgroundImage.height),st(e,10),this.isBackgroundImageReady=!0}),i.src=t}adjustSize(){let{width:t}=this.canvas.parentElement.getBoundingClientRect(),i=window.innerHeight;this.canvas.width=t*this.pixelDensity,this.canvas.height=i*this.pixelDensity,this.canvas.style.width=`${t}px`,this.canvas.style.height=`${i}px`,this.canvasWidth=t*this.pixelDensity,this.canvasHeight=i*this.pixelDensity,this.offscreenCanvas.width=t*this.pixelDensity,this.offscreenCanvas.height=i*this.pixelDensity}render(){this._isReady?requestAnimationFrame(this._render):requestAnimationFrame(this.render)}_render(t){if(!this.isHidden){if(!this._isRendering){this._isRendering=!0;let i=(t-this.setHighlightsAt)/60,e=this.ctx;e.fillStyle="black",e.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.isBackgroundImageReady&&this.backgroundImage.width>0&&this.backgroundOpacity<1&&e.drawImage(this.backgroundImage,0,0,this.backgroundImage.width,this.backgroundImage.height,0,0,this.canvasWidth,this.canvasHeight);let n=this.highlights.filter(a=>a.darkenAroundHighlight);n.length>0&&(e.fillStyle="rgba(0,0,0,0.6)",e.fillRect(0,0,this.canvasWidth,this.canvasHeight)),e.fillStyle=this.backgroundColor,e.globalAlpha=this.backgroundOpacity,e.fillRect(0,0,this.canvasWidth,this.canvasHeight),e.globalAlpha=1,e.transform(this.zoom,0,0,this.zoom,V(this.canvasWidth/2),V(this.canvasHeight/2)),this.image.width>0&&e.drawImage(this.image,-this.x,-this.y);let o=10*this.pixelDensity/this.zoom;if(n.length>0){e.fillStyle="rgba(0,0,0,0.6)",e.setTransform(1,0,0,1,0,0),e.fillRect(0,0,this.canvasWidth,this.canvasHeight),e.transform(this.zoom,0,0,this.zoom,V(this.canvasWidth/2),V(this.canvasHeight/2)),e.save();let a=new Path2D;n.forEach(s=>{S(a,-this.x+s.x,-this.y+s.y,s.width,s.height,o)}),e.clip(a),this.image.width>0&&e.drawImage(this.image,-this.x,-this.y),e.restore()}this.highlights.forEach(a=>{var h;let s=new Path2D;switch(e.lineWidth=V(this._style.lineWidth/2*this.pixelDensity/this.zoom),(h=a.effect)!=null?h:a.isHidden?"hidden":"solid"){case"hidden":break;case"ants":e.strokeStyle=a.color?a.color:this._style.lineColor,e.setLineDash([40/this.zoom,20/this.zoom]),e.lineDashOffset=-(i*5%60)/this.zoom,S(s,-this.x+a.x,-this.y+a.y,a.width,a.height,o),e.stroke(s);break;case"draw":let d=(a.width+a.height)*2;e.strokeStyle=a.color?a.color:this._style.lineColor,e.setLineDash([d]),e.lineDashOffset=Math.max(0,d-i*(d/60)),S(s,-this.x+a.x,-this.y+a.y,a.width,a.height,o),e.stroke(s);break;case"flash":e.strokeStyle=a.color?a.color:this._style.lineColor,e.setLineDash([]),S(s,-this.x+a.x,-this.y+a.y,a.width,a.height,o),e.globalAlpha=(1+Math.sin(i/4))/2,e.stroke(s),e.globalAlpha=1;break;case"solid":default:e.strokeStyle=a.color?a.color:this._style.lineColor,e.setLineDash([]),S(s,-this.x+a.x,-this.y+a.y,a.width,a.height,o),e.stroke(s);break}e.setLineDash([]),e.lineDashOffset=0}),this.highlights.forEach(a=>{var s;if(a.hasDot){let c=(this._style.markerSize/2-2)*this.pixelDensity/this.zoom,h=2*this.pixelDensity*((1+Math.sin(i/4))/2)/this.zoom,d=new Path2D;d.arc(-this.x+a.dotX,-this.y+a.dotY,V(c+h),0,2*Math.PI),e.fillStyle=(s=a.dotColor)!=null?s:this._style.lineColor,e.fill(d),e.lineWidth=4*this.pixelDensity/this.zoom,e.strokeStyle="black",e.stroke(d)}}),this.highlights.forEach(a=>{let s=18*this.pixelDensity-4;if(e.font=`bold ${s/this.zoom}px Arial`,e.textAlign="center",e.fillStyle="white",e.strokeStyle="black",e.lineWidth=6*this.pixelDensity/this.zoom,a.label){let c=this.ensureLabelXIsInsideBoundaries(e.measureText(a.label).width,-this.x+a.x+a.width*.5);e.strokeText(a.label,c,-this.y+a.y+a.height-(s+5)/this.zoom),e.fillText(a.label,c,-this.y+a.y+a.height-(s+5)/this.zoom)}if(a.dotLabel){let c=this.ensureLabelXIsInsideBoundaries(e.measureText(a.dotLabel).width,-this.x+a.dotX);e.strokeText(a.dotLabel,c,-this.y+a.dotY-(s+10)/this.zoom),e.fillText(a.dotLabel,c,-this.y+a.dotY-(s+10)/this.zoom)}}),e.setTransform(1,0,0,1,0,0),this.offscreenCanvas.width>0&&this.finalCtx.drawImage(this.offscreenCanvas,0,0),this._isRendering=!1}this.render()}}setBounds(t,i){this.maxX=t,this.maxY=i}setHighlights(t,i){this.noHighlightsBehaviour=this._style.noHighlightsBehaviour,this.highlights=[];let e=this.getDimensions(),n=this.getAutoZoom(e.width,e.height),o=this._style.transitionDuration;t.length>0&&(this.highlights=t.map(a=>et(O({},a),{x:V(a.x/100*this.maxX),y:V(a.y/100*this.maxY),width:V(a.width/100*this.maxX),height:V(a.height/100*this.maxY),dotX:V(a.dotX/100*this.maxX),dotY:V(a.dotY/100*this.maxY)})),e=this.getDimensions(),n=this.getAutoZoom(e.width,e.height)),this.tween.start({x:this.x,y:this.y,z:this.zoom},{x:e.x+e.width/2,y:e.y+e.height/2,z:n},i===this.key?0:o),this.key=i,this.setHighlightsAt=performance.now()}getDimensions(){let t=this.highlights.reduce((i,e)=>{let n=O({},i);return(n.x===-1||e.x<n.x)&&(n.width=n.x+n.width-e.x,n.x=e.x),(n.y===-1||e.y<n.y)&&(n.height=n.y+n.height-e.y,n.y=e.y),e.x+e.width>n.x+n.width&&(n.width=e.x-n.x+e.width),e.y+e.height>n.y+n.height&&(n.height=e.y-n.y+e.height),n},{x:-1,y:-1,width:0,height:0});return this.highlights.length===0&&(t.x=0,t.y=0,t.width=this.maxX,t.height=this.maxY),this.applyBias(t),t}applyBias(t){if(N.getWidth()<900)return;let i=t.width>t.height;this.bias==="left"?t.width*=i?2.1:2.4:this.bias==="right"&&(t.width*=i?2.1:2.4,t.x-=t.width/(i?1.9:1.7))}getAutoZoom(t,i){(typeof t=="undefined"||typeof i=="undefined")&&(t=this.maxX,i=this.maxY);let e=t===this.maxX,n=this.noHighlightsBehaviour==="contain"||this.highlights.length>0;n&&(t*=e?1.05:1.2,i*=e?1.05:1.2);let o=this.canvasWidth/t,a=this.canvasHeight/i,s=n?Math.min(a,o):Math.max(a,o);return(0,K.default)(s,rt,bt)}setZoom(t){typeof t=="undefined"?this.zoom=this.getAutoZoom():this.zoom=t,this.zoom=(0,K.default)(this.zoom,rt,bt),this.setCenter(this.x,this.y)}setCenter(t,i){typeof t!="undefined"?(this.x=V(t),this.y=V(i)):(this.x=V(this.maxX/2),this.y=V(this.maxY/2))}onTweenTick(t){isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||(this.setCenter(t.x,t.y),this.setZoom(t.z))}hasHighlightAtScreenPosition(t){let i=n=>(n-this.x)*this.zoom+this.canvasWidth/2,e=n=>(n-this.y)*this.zoom+this.canvasHeight/2;return this.highlights.reduce((n,o)=>n?!0:!(t.x<i(o.x)||t.x>i(o.x+o.width)||t.y<e(o.y)||t.y>e(o.y+o.height)),!1)}ensureLabelXIsInsideBoundaries(t,i){let e=this.getDimensions(),n=-this.x+e.x,o=n+e.width;return i-t*.5<n?i=n+t*.5:i+t*.5>o&&(i=o-t*.5),i}};function S(l,t,i,e,n,o){"roundRect"in l?l.roundRect(t,i,e,n,o):l.rect(t,i,e,n,o)}function _(){J("[data-scrollpoints]").forEach(l=>Tt(l))}function Tt(l){let t=l.querySelector("[data-media]"),i=document.createElement("canvas");t.appendChild(i);let e,n,o=new Image;o.addEventListener("load",()=>{a.setBounds(o.naturalWidth,o.naturalHeight),a.adjustSize(),c(!0)}),o.src=t.getAttribute("data-media");let a=new w(i,o,t.getAttribute("data-color"),parseFloat(t.getAttribute("data-opacity")||"10")/100);a.setInstantSrc(t.getAttribute("data-instant")),It(l,i,a);let s=J("[data-box]",l);a.key=s[0].getAttribute("data-item-id");function c(m=!1){if(n=mt(l),n!==e||m===!0){if(e=n,!n)return;Xt(n,a);let G=n.getAttribute("data-item-id");if(G&&window.dispatchEvent(new CustomEvent("scrollpoint:active-point-changed",{detail:{itemId:G}})),n.getAttribute("data-box")==="")a.setHighlights([],G);else{let{highlights:x}=JSON.parse(n.getAttribute("data-box")),X=x.map(W=>({x:parseFloat(W.x),y:parseFloat(W.y),width:parseFloat(W.width),height:parseFloat(W.height),effect:W.effect,color:W.color||"red",label:W.label||"",hasDot:!!W.hasDot,dotX:parseFloat(W.dotX),dotY:parseFloat(W.dotY),dotColor:W.dotColor,dotLabel:W.dotLabel||"",darkenAroundHighlight:W.darkenAroundHighlight||!1}));a.setHighlights(X,G)}}}function h(){c();let{top:m,bottom:G}=l.getBoundingClientRect();m>N.getHeight()||G<N.getTop()?a.hide():a.show()}let d=0;function r(){clearTimeout(d),d=window.setTimeout(()=>{a.adjustSize(),c(!0)},200)}return(document.getElementById("editor-viewport")||document).addEventListener("scroll",h,{passive:!0}),window.addEventListener("resize",r,{passive:!0}),()=>{f(!0).catch(console.error);let m=t.getAttribute("data-media");o.src!==m&&(o.src=m),a.setInstantSrc(t.getAttribute("data-instant")),s=J("[data-box]",l),a.backgroundColor=t.getAttribute("data-color"),a.backgroundOpacity=parseFloat(t.getAttribute("data-opacity"))/100,c(!0)}}function It(l,t,i){if(!document.getElementById("editor-viewport"))return;let e=l.getAttribute("data-section-id");t.addEventListener("mousemove",n=>{i.hasHighlightAtScreenPosition({x:n.offsetX,y:n.offsetY})?document.body.style.setProperty("cursor","zoom-in"):document.body.style.setProperty("cursor","auto")},{passive:!0}),t.addEventListener("click",n=>{if(i.hasHighlightAtScreenPosition({x:n.offsetX,y:n.offsetY})){let o=mt(l);window.dispatchEvent(new CustomEvent("scrollpoint:manage-highlights",{detail:{sectionId:e,activeItemId:o.getAttribute("data-item-id")}}))}})}function mt(l){let t=window.innerHeight*.9,i=l.querySelector("[data-media]"),e=J("[data-box]",l),n,o=l.getBoundingClientRect();return o.bottom<N.getTop()+N.getHeight()?(n=e[e.length-1],i.setAttribute("data-attach","after")):o.top<N.getTop()?(n=e.reduce((a,s)=>s.getBoundingClientRect().top<t?s:a,e[0]),i.setAttribute("data-attach","during")):(n=e[0],i.setAttribute("data-attach","before")),n}function Xt(l,t){switch(l.getAttribute("data-align")){case"left":t.bias="right";break;case"right":t.bias="left";break;default:t.bias="none"}}_();})();
/*! Bundled license information:

classnames/dedupe.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)
*/
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0c4c7c49-0f3e-5e7f-ba87-5ee33f87aa06")}catch(e){}}();
//# sourceMappingURL=scrollpoints.299746.min.js.map
//# debugId=0c4c7c49-0f3e-5e7f-ba87-5ee33f87aa06
